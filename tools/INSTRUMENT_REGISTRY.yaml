instruments:
  - id: dft_connectivity
    name: "DfT Connectivity Tool"
    type: "external_api"
    description: "Returns PTAL-like connectivity scores for a site."
    required_inputs: ["site_id", "lat", "lon"]
    notes: "Provide either site_id (preferred, uses canonical geometry) OR lat+lon."
    
  - id: environment_agency_flood
    name: "EA Flood Risk"
    type: "external_api"
    description: "Returns flood zone designation."
    required_inputs: ["site_id", "polygon_wkt", "polygon_geojson"]
    notes: "Provide one of site_id OR polygon_wkt OR polygon_geojson."

  - id: auto_georef_plan_map
    name: "Auto Georeference Plan Map"
    type: "internal_workflow"
    description: "Closed-loop georeferencing for map-like visual assets using GDAL/QGIS macros."
    required_inputs: ["visual_asset_id", "segmentation_mask_id", "target_crs"]
    notes: "Uses SAM2-derived masks (e.g., redline). Logs Transform + ProjectionArtifact with limitations; supports configurable success thresholds."
    
  - id: casa_quant
    name: "CASA QUANT"
    type: "model_inference"
    description: "Urban simulation model for transport/land use."
    required_inputs: ["scenario_params"]

  - id: townscape_vlm_assessment
    name: "Townscape / Visual Impact Assessment (VLM)"
    type: "model_inference"
    description: "Produces planner-legible townscape/visual impact signals from plans, elevations, streetscape photos, and photomontages (may include quantitative proxies with explicit uncertainty)."
    required_inputs:
      - "visual_asset_refs"
      - "viewpoint_context"

  - id: render_simple_chart
    name: "Simple Chart Renderer"
    type: "internal_renderer"
    description: "Renders a simple chart (SVG) from a structured figure specification."
    required_inputs:
      - "figure_spec"
      - "plan_project_id"
      - "scenario_id"

  - id: sea_hra
    name: "SEA/HRA Continuous Checks"
    type: "internal_workflow"
    description: "Runs continuous sustainability checks over emerging allocations and flags risks with limitations."
    required_inputs: ["allocation_set_ref", "constraints_ref"]

  - id: five_year_supply
    name: "5-Year Land Supply Checker"
    type: "internal_workflow"
    description: "Computes an always-on 5YHLS status from trajectories and deliverability signals."
    required_inputs: ["site_trajectory_ref", "deliverability_signals_ref"]
