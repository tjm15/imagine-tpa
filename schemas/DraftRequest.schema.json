{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DraftRequest",
  "type": "object",
  "description": "A user-initiated request to generate a quick draft (text, tables, or figures) for an artefact, with explicit constraints and traceability.",
  "properties": {
    "draft_request_id": { "type": "string", "format": "uuid" },
    "requested_at": { "type": "string", "format": "date-time" },
    "requested_by": { "type": "string", "enum": ["user", "agent", "system"] },
    "artefact_type": {
      "type": "string",
      "enum": [
        "policy_clause",
        "plan_chapter",
        "place_portrait",
        "consultation_summary",
        "site_assessment",
        "officer_report_section",
        "other"
      ]
    },
    "audience": { "type": ["string", "null"], "description": "E.g. planner, cabinet, public, inspector." },
    "style_guide": { "type": ["string", "null"], "description": "E.g. officer tone, plain English, GOV.UK." },
    "context": {
      "type": "object",
      "description": "Optional anchors for plan-making or casework context.",
      "properties": {
        "plan_project_id": { "type": ["string", "null"], "format": "uuid" },
        "culp_stage_id": { "type": ["string", "null"] },
        "scenario_id": { "type": ["string", "null"], "format": "uuid" },
        "framing_id": { "type": ["string", "null"], "format": "uuid" },
        "application_id": { "type": ["string", "null"], "format": "uuid" },
        "site_id": { "type": ["string", "null"], "format": "uuid" }
      }
    },
    "user_prompt": { "type": ["string", "null"] },
    "constraints": { "type": "object", "description": "Optional user constraints (what must/must not be included)." }
  },
  "required": ["draft_request_id", "requested_at", "requested_by", "artefact_type"]
}
